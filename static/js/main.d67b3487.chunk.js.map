{"version":3,"sources":["../../node_modules/uuid/deprecate.js","../../node_modules/uuid/dist/rng.js","../../node_modules/uuid/dist/bytesToUuid.js","../../node_modules/uuid/dist/v4.js","../../node_modules/uuid/v4.js","../../src/index.js","App.js","index.js"],"names":["deprecate","require$$0","err","fn","msg","warned","console","warn","apply","this","arguments","Object","defineProperty","exports","value","_crypto","default","randomBytes","obj","__esModule","module","byteToHex","i","toString","substr","_default","buf","offset","bth","join","_rng","_interopRequireDefault","_bytesToUuid","require$$1","options","Array","rnds","random","rng","ii","v4","getParentMap","headingLevel","latestRoots","transformRootNode","node","expanded","id","text","getFlatNodeListFromHeadings","headings","roots","H2","H3","H4","H5","H6","getDefaultRoot","heading","index","childrenCount","rootId","element","childNodes","tagName","test","Error","checkTag","h","uuid","parentMap","getNodeTreeFromFlatNodeList","shouldDefaultToExpand","rootKeys","parents","currentRoot","child","parentId","parent","checkParent","SomeHeadings","headingsContainerRef","useRef","useState","pageHeadingNodes","setPageHedingNodes","pageHeadingTree","setPageHeadingTree","useEffect","headingNodes","current","querySelectorAll","React","finalRoots","callback","className","ref","map","renderNodeList","length","key","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d67b3487.chunk.js","sourcesContent":["// Extracted from: https://github.com/TooTallNate/util-deprecate\nlet deprecate;\ntry {\n  const util = require('util');\n  deprecate = util.deprecate;\n} catch (err) {\n  deprecate = function deprecate(fn, msg) {\n    var warned = false;\n    function deprecated() {\n      if (!warned) {\n        console.warn(msg);\n        warned = true;\n      }\n      return fn.apply(this, arguments);\n    }\n\n    return deprecated;\n  };\n}\nmodule.exports = deprecate;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = rng;\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction rng() {\n  return _crypto.default.randomBytes(16);\n}\n\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n}\n\nvar _default = bytesToUuid;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _rng = _interopRequireDefault(require(\"./rng.js\"));\n\nvar _bytesToUuid = _interopRequireDefault(require(\"./bytesToUuid.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n\n  var rnds = options.random || (options.rng || _rng.default)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || (0, _bytesToUuid.default)(rnds);\n}\n\nvar _default = v4;\nexports.default = _default;\nmodule.exports = exports.default;","const deprecate = require('./deprecate.js');\n\nconst v4 = require('./dist/v4.js');\n\nmodule.exports = deprecate(\n  v4,\n  \"Deep requiring like `const uuidv4 = require('uuid/v4');` is deprecated as of uuid@7.x. Please require the top-level module when using the Node.js CommonJS module or use ECMAScript Modules when bundling for the browser. See https://github.com/uuidjs/uuid#deep-requires-now-deprecated for more information.\",\n);\n","import uuid from \"uuid/v4\";\nimport * as React from \"react\";\n\nconst getParentMap = (headingLevel, latestRoots) => {\n\treturn Object.keys(latestRoots)\n\t\t.map((k) => latestRoots[k])\n\t\t.slice(0, headingLevel[1] - 2);\n};\n\nconst transformRootNode = (node, expanded) => ({\n\t...node,\n\tid: node.element.id,\n\ttext: node.element.innerText || node.element.innerHTML,\n\texpanded: expanded,\n});\n\nconst checkParent = (parent) => {\n\tif (!parent) {\n\t\tthrow Error(\n\t\t\t\"(usePageHeadingsTree.js): One of the tree nodes is missing a parent.\\n\" +\n\t\t\t\t\"You may have skipped a heading level in your document or your query may \" +\n\t\t\t\t'not contain a sequential list of heading nodes (Correct: \"h2,h3,h4\" Incorrect: \"h2,h4\")'\n\t\t);\n\t}\n};\n\nconst checkTag = (tagName) => {\n\tif (!/^H[2-6]$/.test(tagName)) {\n\t\tthrow Error(\n\t\t\t`(usePageHeadingsTree.js): <${tagName.toLowerCase()}> elements are not supported. ` +\n\t\t\t\t` Only heading elements (<h2> through <h6>)  are supported (for now).`\n\t\t);\n\t}\n};\n\nconst getFlatNodeListFromHeadings = (headings) => {\n\tconst latestRoots = {};\n\tconst roots = { H2: {}, H3: {}, H4: {}, H5: {}, H6: {} };\n\n\tconst getDefaultRoot = (heading, index) => ({\n\t\tchildrenCount: 0,\n\t\trootId: latestRoots[heading.tagName],\n\t\telement: heading,\n\t\tchildNodes: [],\n\t\tindex: index,\n\t});\n\n\theadings.forEach((h, i) => {\n\t\tcheckTag(h.tagName);\n\n\t\tlatestRoots[h.tagName] = uuid();\n\t\tif (h.tagName === \"H2\") {\n\t\t\troots.H2[latestRoots.H2] = getDefaultRoot(h, i);\n\t\t\treturn;\n\t\t}\n\t\troots[h.tagName][latestRoots[h.tagName]] = {\n\t\t\t...getDefaultRoot(h, i),\n\t\t\tparentMap: getParentMap(h.tagName, latestRoots),\n\t\t};\n\t});\n\n\treturn roots;\n};\n\nconst getNodeTreeFromFlatNodeList = (roots, shouldDefaultToExpand) => {\n\tconst rootKeys = Object.keys(roots);\n\n\tfor (let i = rootKeys.length - 1; i >= 0; i--) {\n\t\tconst parents = roots[rootKeys[i - 1]];\n\t\tconst currentRoot = roots[rootKeys[i]];\n\n\t\tif (currentRoot) {\n\t\t\tObject.keys(currentRoot).forEach((childKey) => {\n\t\t\t\tconst child = transformRootNode(\n\t\t\t\t\tcurrentRoot[childKey],\n\t\t\t\t\tshouldDefaultToExpand\n\t\t\t\t);\n\t\t\t\tif (child.parentMap) {\n\t\t\t\t\tconst parentId =\n\t\t\t\t\t\tchild.parentMap[child.parentMap.length - 1];\n\t\t\t\t\tconst parent = parents[parentId];\n\n\t\t\t\t\tcheckParent(parent);\n\n\t\t\t\t\tparent.childrenCount += child.childNodes.length + 1;\n\t\t\t\t\tparent.childNodes.push(child);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\tconst finalRoots = Object.keys(roots.H2).map((k) =>\n\t\ttransformRootNode(roots.H2[k], shouldDefaultToExpand)\n\t);\n\treturn finalRoots;\n};\n\nexport const usePageHeadingsTree = (\n\theadings,\n\tcallback,\n\tshouldDefaultToExpand\n) => {\n\tReact.useEffect(() => {\n\t\tconst roots = getFlatNodeListFromHeadings(headings);\n\t\tconst finalRoots = getNodeTreeFromFlatNodeList(\n\t\t\troots,\n\t\t\tshouldDefaultToExpand\n\t\t);\n\t\tcallback(finalRoots);\n\t}, [headings, shouldDefaultToExpand]);\n};\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { usePageHeadingsTree } from \"use-page-headings-tree\";\n\nconst SomeHeadings = () => {\n\tconst headingsContainerRef = useRef();\n\tconst [pageHeadingNodes, setPageHedingNodes] = useState([]);\n\tconst [pageHeadingTree, setPageHeadingTree] = useState(null);\n\n\tuseEffect(() => {\n\t\tconst headingNodes = headingsContainerRef.current.querySelectorAll(\n\t\t\t\"h2,h3,h4,h5,h6\"\n\t\t);\n\t\tsetPageHedingNodes(headingNodes);\n\t}, []);\n\n\tusePageHeadingsTree(pageHeadingNodes, setPageHeadingTree, false);\n\n\tconst renderNodeList = (node) => (\n\t\t<>\n\t\t\t<li>{node.text}</li>\n\t\t\t{node.childNodes.length > 0 ? (\n\t\t\t\t<ul key={node.id}>{node.childNodes.map(renderNodeList)}</ul>\n\t\t\t) : null}\n\t\t</>\n\t);\n\n\treturn (\n\t\t<div className=\"card bg-light\">\n\t\t\t<div\n\t\t\t\tref={headingsContainerRef}\n\t\t\t\tclassName=\"bg-dark p-3 text-light rounded-top\"\n\t\t\t>\n\t\t\t\t<h1>This is the main page heading (not included)</h1>\n\t\t\t\t<h2 id=\"hid1\">First h2</h2>\n\t\t\t\t<h3 id=\"hid2\">First h3</h3>\n\t\t\t\t<h3 id=\"hid3\">Second h3</h3>\n\t\t\t\t<h2 id=\"hid4\">Second h2</h2>\n\t\t\t\t<h3 id=\"hid5\">Third h3</h3>\n\t\t\t\t<h4 id=\"hid6\">First h4</h4>\n\t\t\t\t<h5 id=\"hid7\">First h5</h5>\n\t\t\t\t<h6 id=\"hid8\">First h6</h6>\n\t\t\t\t<h3 id=\"hid9\">Fourth h3</h3>\n\t\t\t</div>\n\t\t\t<div className=\"p-5\">\n\t\t\t\t<h2>Result</h2>\n\t\t\t\t<pre>\n\t\t\t\t\t{pageHeadingTree ? (\n\t\t\t\t\t\t<ul>{pageHeadingTree.map(renderNodeList)}</ul>\n\t\t\t\t\t) : null}\n\t\t\t\t</pre>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nconst App = () => {\n\treturn (\n\t\t<div className=\"m-5\">\n\t\t\t<SomeHeadings />\n\t\t</div>\n\t);\n};\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}